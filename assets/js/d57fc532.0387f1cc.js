"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3312],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var l=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,l,s=function(e,t){if(null==e)return{};var n,l,s={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var m=l.createContext({}),o=function(e){var t=l.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=o(e.components);return l.createElement(m.Provider,{value:t},e.children)},y={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},c=l.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,m=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=o(n),u=s,d=c["".concat(m,".").concat(u)]||c[u]||y[u]||r;return n?l.createElement(d,a(a({ref:t},p),{},{components:n})):l.createElement(d,a({ref:t},p))}));function u(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,a=new Array(r);a[0]=c;var i={};for(var m in t)hasOwnProperty.call(t,m)&&(i[m]=t[m]);i.originalType=e,i.mdxType="string"==typeof e?e:s,a[1]=i;for(var o=2;o<r;o++)a[o]=n[o];return l.createElement.apply(null,a)}return l.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5588:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>a,default:()=>y,frontMatter:()=>r,metadata:()=>i,toc:()=>o});var l=n(7462),s=(n(7294),n(3905));const r={},a="mysql\u6982\u8ff0",i={unversionedId:"mysql-dba/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/\u5b89\u88c5",id:"mysql-dba/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/\u5b89\u88c5",title:"mysql\u6982\u8ff0",description:"mysql\u662f\u4f18\u79c0\u7684\u5f00\u6e90\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93",source:"@site/docs\\mysql-dba\\01.mysql\u5b89\u88c5\u4e0e\u5347\u7ea7\\01.\u5b89\u88c5.md",sourceDirName:"mysql-dba/01.mysql\u5b89\u88c5\u4e0e\u5347\u7ea7",slug:"/mysql-dba/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/\u5b89\u88c5",permalink:"/docs/mysql-dba/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/\u5b89\u88c5",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/mysql-dba/01.mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/01.\u5b89\u88c5.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"mysql-dba",previous:{title:"MySQL\u7b80\u4ecb",permalink:"/docs/mysql-dba/intro"},next:{title:"linux\u78c1\u76d8\u7ba1\u7406\u53ca\u6587\u4ef6\u7cfb\u7edf",permalink:"/docs/mysql-dba/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/linux\u78c1\u76d8\u7ba1\u7406\u53ca\u6587\u4ef6\u7cfb\u7edf"}},m={},o=[],p={toc:o};function y(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,l.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"mysql\u6982\u8ff0"},"mysql\u6982\u8ff0"),(0,s.kt)("p",null,"mysql\u662f\u4f18\u79c0\u7684\u5f00\u6e90\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93"),(0,s.kt)("p",null,"\u4f55\u4e3a\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff0c\u652f\u6301\u5173\u7cfb\u6a21\u578b\u7684\u6570\u636e\u5e93"),(0,s.kt)("p",null,"\u7531\u4e8emysql\u662f\u5f00\u6e90\u6570\u636e\u5e93\uff0c\u5176\u9075\u5faa\u5f00\u6e90MIT\u534f\u8bae\uff0c\u5f88\u5bbd\u677e\uff0c\u6709\u4f17\u591a\u53d1\u884c\u7248"),(0,s.kt)("h1",{id:"\u5982\u4f55\u9009\u62e9"},"\u5982\u4f55\u9009\u62e9"),(0,s.kt)("p",null,"\u7ed3\u8bba\uff1a\u9009\u62e9oracle\u5b98\u65b9\u7248\u672c5.7\u7248\u672c"),(0,s.kt)("h1",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,s.kt)("p",null,"\u4e0a",(0,s.kt)("a",{parentName:"p",href:"https://dev.mysql.com/downloads/mysql/"},"mysql\u5b98\u7f51"),"\u4e0b\u8f7d\u793e\u533a\u7248mysql,",(0,s.kt)("a",{parentName:"p",href:"https://dev.mysql.com/downloads/mysql/"},"https://dev.mysql.com/downloads/mysql/")),(0,s.kt)("p",null,"Select Operating System\u9009\u62e9linux-generic\uff0c\u9009\u62e9\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\uff0c\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\u53c8\u79f0\u7eff\u8272\u7248\uff0c\u514d\u5b89\u88c5\uff0c"),(0,s.kt)("p",null,"\u4e0b\u8f7d\u5b8c\u6bd5\u4e4b\u540e\uff0c"),(0,s.kt)("h1",{id:"\u51c6\u5907\u5de5\u4f5c"},"\u51c6\u5907\u5de5\u4f5c"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"\u67e5\u770b\u5f53\u524d\u73af\u5883\u662f\u5426\u6709mariadb\nrpm -qa | grep mariadb\nrpm remove mariadb")),(0,s.kt)("ol",{start:2},(0,s.kt)("li",{parentName:"ol"},"\u521b\u5efamysql\u8d26\u6237\nuser add -s -M msyql\n-r \u8868\u793a\u7cfb\u7edf\u8d26\u6237\n-M \u65e0\u9700\u5efa\u7acbhome\u5bb6\u76ee\u5f55\n-s /sbin/nologin,\u6307\u5b9ashell\u811a\u672c")),(0,s.kt)("p",null,"\u6570\u636e\u662f\u7075\u9b42\uff0c\u6240\u4ee5\u4e3a\u4e86\u6570\u636e\u7684\u5b89\u5168\uff0c\u5c06\u5e94\u7528\u7a0b\u5e8f\u4e0e\u6570\u636e\u76ee\u5f55\u5e94\u5728\u4e24\u5757\u72ec\u7acb\u7684\u78c1\u76d8"),(0,s.kt)("h1",{id:"\u521d\u59cb\u5316\u6570\u636e"},"\u521d\u59cb\u5316\u6570\u636e"),(0,s.kt)("p",null,"\u5728mysql5.6\u73af\u5883\u4e0b\uff0c\nmysql_install_db --user=mysql --basedir= --datadir="),(0,s.kt)("p",null,"\u5728mysql5.7\u73af\u5883\u4e0b\nmysqld --initialize --user=mysql --basedir= --datadir="),(0,s.kt)("p",null,"libaio.so\nyum install lieaio-devel"),(0,s.kt)("p",null,"\u5efa\u8bae\u4f7f\u7528mysqld\u547d\u4ee4\u8fdb\u884c\u521d\u59cb\u5316\uff0cmysqld\u547d\u4ee4\u7684initialize\u548cinitialize_insecure\u90fd\u53ef\u4ee5\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u4e24\u8005\u7684\u533a\u522b\u5728\u4e8einitialize\u9009\u9879\u4f1a\u751f\u6210\u4e00\u4e2a\u4e34\u65f6\u5bc6\u7801\uff0c\u800cinitialize_insecure\u9009\u9879\u4e0d\u4f1a\uff0c\u6ca1\u6709\u5bf9\u6bd4\u5c31\u6ca1\u6709\u4f24\u5bb3\uff0cinitialize_insecure\u9009\u9879\u867d\u7136\u6bd4\u8f83\u957f\uff0c\u4f46\u662f\u66f4\u52a0\u65b9\u4fbf\uff0c\u56e0\u6b64\u66f4\u52a0\u63a8\u8350"),(0,s.kt)("p",null,"\u5728mysql\u521d\u59cb\u5316\u5b8c\u6bd5\u4e4b\u540e\uff0cmysql\u670d\u52a1\u53ef\u4ee5\u6b63\u5e38\u542f\u52a8\u4e4b\u540e\uff0c\u9700\u8981\u5c06mysql\u5e94\u7528\u76ee\u5f55\u7684\u6743\u9650\u4ea4\u7ed9root\u8d26\u6237\uff0c\u9632\u6b62\u5176\u4ed6\u8d26\u6237\u6539\u52a8"),(0,s.kt)("p",null,"mysql\u7684\u914d\u7f6e\u6587\u4ef6"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"cat>/etc/my.cnf <<-EOF\n[mysql]\n\n[mysqld]\nuser=mysql\nport=3306\nsocket=\npid-file=\nbasedir=\ndatadir=\n\n# \u9519\u8bef\u65e5\u5fd7\u914d\u7f6e\nlog-error=error.log\nEOF\n")),(0,s.kt)("p",null,"mysql\u670d\u52a1\u7684\u7ba1\u7406\nsys-v\u548csystemctl\n\u4f46\u5728centos6\u73af\u5883\u4e0b\u53ea\u80fd\u4f7f\u7528sys-v\u7684\u65b9\u5f0f\uff0c\u5728centos7\u73af\u5883\u4e0b\u53ef\u4ee5\u4e24\u79cd\u65b9\u5f0f\u4efb\u610f\u9009\u62e9"),(0,s.kt)("p",null,"sys-v\u65b9\u5f0f\n\u5728mysql\u7684\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\u4e0b\u7684support-files\u4e0b\u6709\u4e00\u4e2a\u53ebmysql.server\u7684\u6587\u4ef6\uff0c\u5c06\u5176copy\u5230/etc/init.d/\u4e0b\uff0c\u8fd9\u91cc\u5c06\u5176\u91cd\u547d\u540d\u4e3amysqld"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"cp /usr/local/src/mysql-5.7.37-linux-glibc2.12-x86_64/support-files/mysql.server /etc/init.d/mysqld\nservice mysqld start \n")),(0,s.kt)("p",null,"systemct\u65b9\u5f0f\ncat > /etc/systemd/system/mysqld.service <<-EOF\n","[Unit]","\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=",(0,s.kt)("a",{parentName:"p",href:"http://dev.mysql.com/doc/refman/en/using-systemd.html"},"http://dev.mysql.com/doc/refman/en/using-systemd.html"),"\nAfter=network.target\nAfter=rsyslog.target"),(0,s.kt)("p",null,"[Service]","\nUser=mysql\nGroup=mysql"),(0,s.kt)("h1",{id:"have-mysqld-write-its-state-to-the-systemd-notify-socket"},"Have mysqld write its state to the systemd notify socket"),(0,s.kt)("p",null,"Type=forking"),(0,s.kt)("h1",{id:"start-main-service"},"Start main service"),(0,s.kt)("p",null,"ExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --daemonize"),(0,s.kt)("h1",{id:"sets-open_files_limit"},"Sets open_files_limit"),(0,s.kt)("p",null,"LimitNOFILE = 10000"),(0,s.kt)("p",null,"[Install]","\nWantedBy=multi-user.target\nEOF"),(0,s.kt)("p",null,"\u5982\u4f55\u5f00\u673a\u81ea\u542f\u52a8mysqld\u670d\u52a1\nsystemctl enable mysqld"),(0,s.kt)("h1",{id:"\u5347\u7ea7"},"\u5347\u7ea7"),(0,s.kt)("p",null,"mysql\u7684\u5347\u7ea7\u5f88\u7b80\u5355\uff0c\u4e0b\u8f7d\u66ff\u6362\u539f\u6765\u7684mysql\u5e94\u7528\u76ee\u5f55\uff0c\u521d\u59cb\u5316\uff0c\nmysqld upgrade\u4fee\u590d\u5143\u6570\u636e\u5373\u53ef\u5b8c\u6210mysql\u7684\u5347\u7ea7"),(0,s.kt)("h1",{id:"root\u8d26\u6237\u5fd8\u8bb0\u5bc6\u7801\u600e\u4e48\u529e"},"root\u8d26\u6237\u5fd8\u8bb0\u5bc6\u7801\u600e\u4e48\u529e?"),(0,s.kt)("p",null,"mysql\u7684\u6743\u9650\u6821\u9a8c\u673a\u5236\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"\u9996\u5148\u901a\u8fc7user+host\u5bf9\u8bbf\u5ba2\u7684\u6743\u9650\u8fdb\u884c\u6821\u9a8c"),(0,s.kt)("li",{parentName:"ol"},"\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u4f1a\u68c0\u67e5\u5bf9\u8bbf\u95ee\u5bf9\u8c61--\u5e93\uff0c\u8868\uff0c\u5217\u7b49\u7684\u6743\u9650\u8fdb\u884c\u6821\u9a8c")),(0,s.kt)("p",null,"\u5728root\u8d26\u6237\u5fd8\u8bb0\u5bc6\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528mysqld_safe\u547d\u4ee4\u7684--skip-grant-tables\u9009\u9879\u4ee5\u8df3\u8fc7\u6388\u6743\u8868\u68c0\u67e5\u7684\u65b9\u5f0f\u767b\u5f55\uff0c\u767b\u5f55\u4e4b\u540e\u4fee\u6539\u5bc6\u7801\u540e\uff0c\u9000\u51fa\u91cd\u542f\u670d\u52a1\u5373\u53ef\n\u4f46\u4ee5\u8df3\u8fc7\u6388\u6743\u8868\u7684\u65b9\u5f0f\u767b\u5f55\uff0c\u6240\u6709\u7ec8\u7aef\u5c31\u90fd\u53ef\u4ee5\u65e0\u5bc6\u7801\u767b\u5f55\uff0c\u6b64\u65f6\u53ef\u4ee5\u7ed3\u5408--skip-networking\uff0c\u7981\u6b62\u8fdc\u7a0b\u94fe\u63a5\u767b\u5f55\uff1b"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"# 1. \u505c\u6389mysqld\u670d\u52a1\nsystemctl restart mysqld\n\n# 2. \u4ee5\u8df3\u8fc7\u6388\u6743\u8868\u7684\u65b9\u5f0f\u7684\u542f\u52a8mysqld\u670d\u52a1\nmysqld_sade --skip-grant-tables --skip-networking &\n\n# 3. \u52a0\u8f7d\u6743\u9650\u8868\nflush privileges;\n\n# 4. \u4fee\u6539\u5bc6\u7801\nset password=password('new_password');\n\n# 5. \u9000\u51fa\u91cd\u542fmysqld\u670d\u52a1\n\n\n")),(0,s.kt)("h1",{id:"\u5982\u679cmysql\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\u600e\u4e48\u529e"},"\u5982\u679cmysql\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\u600e\u4e48\u529e\uff1f"),(0,s.kt)("p",null,"\u53ef\u4ee5\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u542f\u52a8mysql\u670d\u52a1\uff0c\u8fd9\u6837mysql\u5c31\u4f1a\u628a\u9519\u8bef\u4fe1\u606f\u8f93\u51fa\u5230\u5c4f\u5e55"),(0,s.kt)("h1",{id:"\u6743\u9650\u7ba1\u7406"},"\u6743\u9650\u7ba1\u7406"),(0,s.kt)("p",null,"\u65b0\u5efa\u7528\u6237"),(0,s.kt)("p",null,"\u4fee\u6539\u5bc6\u7801"),(0,s.kt)("p",null,"\u7528\u6237\u6388\u6743\ngrant privileges on to "),(0,s.kt)("p",null,"select"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"\u6743\u9650\u6709\u54ea\u4e9b\uff1f\n\u81eamysql5.7\u4e4b\u540e\uff0c\u53ea\u80fd\u5148\u65b0\u5efa\u7528\u6237\uff0c\u7136\u540e\u518d\u6388\u6743\uff0c\u4e24\u8005\u4e0d\u80fd\u5408\u5e76")),(0,s.kt)("p",null,"\u5220\u9664\u7528\u6237"),(0,s.kt)("p",null,"\u65b0\u5efa\u7528\u6237"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"create user liwuming@localhost identified by 'admin123';\n\n\n\ncreate user liwuming@localhost identified by 'admin123';\n\n\n\n")),(0,s.kt)("p",null,"\u9519\u8bef\u65e5\u5fd7"))}y.isMDXComponent=!0}}]);
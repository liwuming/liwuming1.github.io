"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4049],{3905:(l,t,e)=>{e.d(t,{Zo:()=>u,kt:()=>c});var n=e(7294);function s(l,t,e){return t in l?Object.defineProperty(l,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):l[t]=e,l}function r(l,t){var e=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(l,t).enumerable}))),e.push.apply(e,n)}return e}function a(l){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){s(l,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(e,t))}))}return l}function m(l,t){if(null==l)return{};var e,n,s=function(l,t){if(null==l)return{};var e,n,s={},r=Object.keys(l);for(n=0;n<r.length;n++)e=r[n],t.indexOf(e)>=0||(s[e]=l[e]);return s}(l,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);for(n=0;n<r.length;n++)e=r[n],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(l,e)&&(s[e]=l[e])}return s}var i=n.createContext({}),o=function(l){var t=n.useContext(i),e=t;return l&&(e="function"==typeof l?l(t):a(a({},t),l)),e},u=function(l){var t=o(l.components);return n.createElement(i.Provider,{value:t},l.children)},p={inlineCode:"code",wrapper:function(l){var t=l.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(l,t){var e=l.components,s=l.mdxType,r=l.originalType,i=l.parentName,u=m(l,["components","mdxType","originalType","parentName"]),y=o(e),c=s,d=y["".concat(i,".").concat(c)]||y[c]||p[c]||r;return e?n.createElement(d,a(a({ref:t},u),{},{components:e})):n.createElement(d,a({ref:t},u))}));function c(l,t){var e=arguments,s=t&&t.mdxType;if("string"==typeof l||s){var r=e.length,a=new Array(r);a[0]=y;var m={};for(var i in t)hasOwnProperty.call(t,i)&&(m[i]=t[i]);m.originalType=l,m.mdxType="string"==typeof l?l:s,a[1]=m;for(var o=2;o<r;o++)a[o]=e[o];return n.createElement.apply(null,a)}return n.createElement.apply(null,e)}y.displayName="MDXCreateElement"},8224:(l,t,e)=>{e.r(t),e.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>m,toc:()=>o});var n=e(7462),s=(e(7294),e(3905));const r={},a=void 0,m={unversionedId:"mysql/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/mysql\u5b89\u88c5",id:"mysql/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/mysql\u5b89\u88c5",title:"mysql\u5b89\u88c5",description:"VMware Workstation \u4e0e Device/Credential Guard \u4e0d\u517c\u5bb9\u3002\u5728\u7981\u7528 Device/Credential Guard \u540e\uff0c\u53ef\u4ee5\u8fd0\u884c VMware Workstation",source:"@site/docs\\mysql\\00.mysql\u5b89\u88c5\u4e0e\u5347\u7ea7\\mysql\u5b89\u88c5.md",sourceDirName:"mysql/00.mysql\u5b89\u88c5\u4e0e\u5347\u7ea7",slug:"/mysql/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/mysql\u5b89\u88c5",permalink:"/docs/mysql/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/mysql\u5b89\u88c5",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/mysql/00.mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/mysql\u5b89\u88c5.md",tags:[],version:"current",frontMatter:{},sidebar:"mysql",next:{title:"mysql\u7684\u6570\u636e\u5b57\u5178",permalink:"/docs/mysql/mysql\u5b89\u88c5\u4e0e\u5347\u7ea7/mysql\u7684\u6570\u636e\u5b57\u5178"}},i={},o=[{value:"\u5173\u4e8e mysql \u7248\u672c\u7684\u9009\u62e9",id:"\u5173\u4e8e-mysql-\u7248\u672c\u7684\u9009\u62e9",level:2},{value:"mysql \u7684\u5b89\u88c5",id:"mysql-\u7684\u5b89\u88c5",level:2}],u={toc:o};function p(l){let{components:t,...e}=l;return(0,s.kt)("wrapper",(0,n.Z)({},u,e,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"VMware Workstation \u4e0e Device/Credential Guard \u4e0d\u517c\u5bb9\u3002\u5728\u7981\u7528 Device/Credential Guard \u540e\uff0c\u53ef\u4ee5\u8fd0\u884c VMware Workstation"),(0,s.kt)("p",null,"win+r\uff0cservices.msc"),(0,s.kt)("p",null,"win+x,bcdedit /set hypervisorlaunchtype off"),(0,s.kt)("p",null,"linux \u81ea\u5b9a\u4e49\u5206\u533a"),(0,s.kt)("p",null,"boot 300Mb\nhome 1024Mb\nswap \u5206\u533a 2024Mb\n/"),(0,s.kt)("p",null,"ip \u547d\u4ee4"),(0,s.kt)("p",null,"IPADDR=192.168.31.111\nNETMARK=255.255.255.0\nGATEWAY=192.168.31.1\nDNS1=119.29.29.29"),(0,s.kt)("h1",{id:"mysql-\u5b89\u88c5"},"mysql \u5b89\u88c5"),(0,s.kt)("h2",{id:"\u5173\u4e8e-mysql-\u7248\u672c\u7684\u9009\u62e9"},"\u5173\u4e8e mysql \u7248\u672c\u7684\u9009\u62e9"),(0,s.kt)("h2",{id:"mysql-\u7684\u5b89\u88c5"},"mysql \u7684\u5b89\u88c5"),(0,s.kt)("p",null,"\u521b\u5efa\u7528\u6237"),(0,s.kt)("p",null,"useradd -s -r"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"\u7cfb\u7edf\u7528\u6237\u4e0e\u666e\u901a\u7528\u6237\u7684\u533a\u522b")),(0,s.kt)("p",null,"mysql \u7a0b\u5e8f\u76ee\u5f55\u5e94\u8be5\u4e0e\u6570\u636e\u76ee\u5f55\u5206\u5f00\uff0c\u751a\u81f3\u8bf4\uff0c\u6570\u636e\u5e94\u72ec\u7acb\u78c1\u76d8\uff0c\u56e0\u4e3a\u6570\u636e\u662f\u65e0\u4ef7\u7684"),(0,s.kt)("p",null,"\u5173\u4e8e mysql \u7684\u8fd0\u7ef4\u5de5\u5177"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"percona-toolkit")),(0,s.kt)("p",null,"mysql \u5907\u4efd\u5de5\u5177"),(0,s.kt)("p",null,"mysqldump"),(0,s.kt)("p",null,"mydumper"),(0,s.kt)("p",null,"xbk"),(0,s.kt)("p",null,"\u5173\u4e8e mysql \u7684\u5b89\u88c5\u89c4\u5212"),(0,s.kt)("p",null,"mysql \u4e2d\u91cd\u8981\u7684\u6570\u636e\uff0c\u548c\u65e5\u5fd7\u6587\u4ef6\uff0c\u8868\u7a7a\u95f4\uff0c\u7b49\u4fe1\u606f\u7b49\u653e\u5728 liwuming \u76ee\u5f55\u4e0b\uff0c\u89c4\u5212\u5982\u4e0b"),(0,s.kt)("p",null,"/mysql"),(0,s.kt)("p",null,"\u200b |--data\uff1a\u6570\u636e\u76ee\u5f55"),(0,s.kt)("p",null,"\u200b |--logs\uff1a\u65e5\u5fd7\u76ee\u5f55"),(0,s.kt)("p",null,"\u200b |--binlog\uff1a\u4e8c\u8fdb\u5236\u65e5\u5fd7\u76ee\u5f55"),(0,s.kt)("p",null,"\u200b |--idb\uff1a\u8868\u7a7a\u95f4"),(0,s.kt)("p",null,"\u5173\u4e8e mysql \u7248\u672c\u7684\u9009\u62e9"),(0,s.kt)("p",null,"\u5b89\u88c5 lrzsz"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"lrzsz \u662f\u4e00\u4e2a ftp \u7684\u8f6f\u4ef6")),(0,s.kt)("p",null,"\u5c06 mysql \u5305\u62d6\u8fdb/usr/local/src \u76ee\u5f55\u4e0b"),(0,s.kt)("p",null,"\u89e3\u538b mysql \u4e8c\u8fdb\u5236\u5305"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"tag -zxvf mysql-5.7.37-linux-glibc2.12-x86_64.tar.gz\n\n\n\n\n")),(0,s.kt)("p",null,"mysql \u7a0b\u5e8f\u76ee\u5f55\u4e0b\u7684 bin \u76ee\u5f55\u662f\u6240\u6709 mysql \u7684\u53ef\u6267\u884c\u7a0b\u5e8f\n\u5982\u4f55\u5c06\u6240\u6709\u7a0b\u5e8f\u521b\u5efa\u8f6f\u8fde\u63a5\nln -s /usr/local/mysql/","*"," ","*"),(0,s.kt)("p",null,"\u4e8c\u8fdb\u5236\u7248\u662f\u4e00\u4e2a\u514d\u5b89\u88c5\u7248\uff0c"),(0,s.kt)("p",null,"\u5173\u4e8emysql\u7684\u7248\u672c\u9009\u62e9\n5.7.26"),(0,s.kt)("p",null,"\u51c6\u5907\u5de5\u4f5c\n1.\u4e0b\u8f7dmysql\u4e8c\u8fdb\u5236\u5305\n",(0,s.kt)("a",{parentName:"p",href:"https://cdn.mysql.com/Downloads/MySQL-5.7/mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz"},"https://cdn.mysql.com/Downloads/MySQL-5.7/mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz")),(0,s.kt)("p",null,"2.\u5c06mysql\u7684\u8f6f\u4ef6\u5b89\u88c5\u5728/usr/local/mysql/\u76ee\u5f55\u4e0b\uff0c\u5c06mysql\u7684\u6570\u636e\u653e\u5728/liwuming/mysql/data,\u5c06\u65e5\u5fd7\u6570\u636e\u653e\u5728/liwuming/logs/\u76ee\u5f55\u4e0b"),(0,s.kt)("p",null,"3.\u65b0\u5efa\u7cfb\u7edf\u7528\u6237mysql\nuseradd -r -M -s /sbin/nologin mysql"),(0,s.kt)("p",null,"-r:\u7cfb\u7edf\u7528\u6237\n-M\uff1a\u4e0d\u9700\u8981\u5bb6\u76ee\u5f55\n-s\uff1ashell\u811a\u672c"),(0,s.kt)("h1",{id:"\u521d\u59cb\u5316"},"\u521d\u59cb\u5316"),(0,s.kt)("p",null,"mysql5.6\nmysql_install_db --"),(0,s.kt)("p",null,"mysql5.7\nmysqld --initalize --user"),(0,s.kt)("p",null,"pid-file = /liwuming/mysql/mysqld.pid"),(0,s.kt)("h1",{id:"\u4e8c\u8fdb\u5236\u5b89\u88c5"},"\u4e8c\u8fdb\u5236\u5b89\u88c5"),(0,s.kt)("p",null,"\u521d\u59cb\u5316mysql"),(0,s.kt)("p",null,"systemctl daemon-reload"),(0,s.kt)("p",null,"./mysqld --initialize --user=mysql --basedir=/url/local/mysql --datadir=/liwuming/mysql/data\n./mysqld --initialize-insecure --user=mysql --basedir=/url/local/mysql --datadir=/liwuming/mysql/data"),(0,s.kt)("p",null,"systemctl daemon-reload\nsystemctl start mysqld\nmysql\u542f\u52a8\u5931\u8d25"),(0,s.kt)("p",null,"journalctl -xe"),(0,s.kt)("p",null," ExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --daemonize"),(0,s.kt)("p",null,"mysqld --datadir=/liwuming/mysql/data/ --daemonize"),(0,s.kt)("p",null,"\u5728\u5220\u9664\u76ee\u5f55\u8f6f\u8fde\u63a5\u65f6\uff0c\u9700\u8981\u6ce8\u610f\uff1a\u5982\u679c\u4ec5\u4ec5\u662f\u60f3\u5220\u9664\u8f6f\u8fde\u63a5\u4e0d\u9700\u8981\u5220\u9664\u539f\u76ee\u5f55\u4e0b\u7684\u6570\u636e\u65f6\uff0c\u4e0d\u80fd\u52a0/\uff0c\u5426\u5219\u4f1a\u5c06\u539f\u76ee\u5f55\u4e0b\u7684\u6570\u636e\u5220\u9664"),(0,s.kt)("p",null,"#\u4f1a\u751f\u6210\u4e34\u65f6\u5bc6\u7801\nmysqld --initialzie\n#\u65e0\u9650\u5236\uff0c\u65e0\u4e34\u65f6\u5bc6\u7801\nmysqld --initialzie-insecure "),(0,s.kt)("p",null,"yum install -y libaio-devel"),(0,s.kt)("h1",{id:"yum\u5b89\u88c5"},"yum\u5b89\u88c5"),(0,s.kt)("p",null,"mkdir /liwuming/mysql/{data,logs}"),(0,s.kt)("p",null,"touch /liwuming/mysql/logs/error.log"),(0,s.kt)("p",null,"mysql\u914d\u7f6e\u6587\u4ef6\ncat>/etc/my.cnf <<-EOF\n","[mysql]","\nport=3306\nsocket=/tmp/mysql.sock"),(0,s.kt)("p",null,"[mysqld]","\nuser=mysql\nport=3306\nsocket=/liwuming/mysql/mysql.sock\nbasedir=/usr/local/mysql/\ndatadir=/liwuming/mysql/data/"),(0,s.kt)("p",null,"[mysqld_safe]","\npid-file = /liwuming/mysql/mysqld.pid\nlog-error=/liwuming/mysql/logs/error.log\nEOF"),(0,s.kt)("p",null,"\u7f16\u5199mysqld.service\nvi /etc/systemd/system/mysqld.service"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-initalize"},"cat > /etc/systemd/system/mysqld.service <<-EOF\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=rsyslog.target\n\n\n[Service]\nUser=mysql\nGroup=mysql\n# Have mysqld write its state to the systemd notify socket\nType=forking\n\n# Start main service\nExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf --daemonize\n\n# Sets open_files_limit\nLimitNOFILE = 10000\n\n[Install]\nWantedBy=multi-user.target\nEOF\n")),(0,s.kt)("p",null,"systemctl daemon-reload"),(0,s.kt)("p",null,"vi /etc/profile"),(0,s.kt)("p",null,"\u5c06mysql\u7684bin\u76ee\u5f55\u52a0\u5165PATH\u73af\u5883\u53d8\u91cf"),(0,s.kt)("p",null,"mysql\u5b89\u88c5\u5b8c\u6bd5\u4e4b\u540e\uff0c\u7b2c\u4e00\u4ef6\u4e8b\u5c31\u662f\u8fde\u63a5\u5230mysql\uff0c\u4fee\u6539root\u8d26\u6237\u7684\u5bc6\u7801"),(0,s.kt)("p",null,"set password=password('admin123');"),(0,s.kt)("h1",{id:"mysql\u4fee\u6539\u5bc6\u7801\u7684\u65b9\u5f0f"},"mysql\u4fee\u6539\u5bc6\u7801\u7684\u65b9\u5f0f"),(0,s.kt)("p",null,"\u65b9\u6cd5\u4e00\uff1a\nset password=password('xx') ","[ for user@host]",";\nfor\u53ef\u4ee5\u7701\u7565\uff0c\u9ed8\u8ba4\u662f\u7ed9\u81ea\u5df1\u8bbe\u7f6e\u5bc6\u7801"),(0,s.kt)("p",null,"\u65b9\u6cd5\u4e8c\uff1a"),(0,s.kt)("p",null,"root\u8d26\u6237\u5fd8\u8bb0\u5bc6\u7801\u600e\u4e48\u529e"),(0,s.kt)("p",null,"mysql5.7\u4e2d\u7528\u6237\u7684\u5bc6\u7801\u5b57\u6bb5--authentication"),(0,s.kt)("p",null,"mysql\u7684\u5b89\u88c5\u4e0e\u5347\u7ea7"),(0,s.kt)("p",null,"mysql\u670d\u52a1\u7ba1\u7406"),(0,s.kt)("p",null,"\u542f\u52a8mysql\u670d\u52a1"),(0,s.kt)("p",null,"\u5ba2\u6237\u7aef\u53bb\u8fde\u63a5\u5230\u670d\u52a1\u7aef\n\u8fde\u63a5\u65b9\u5f0f\nsocket,\u9002\u7528\u4e8emysqld\u4e0emysql\u5728\u540c\u4e00linux\u5e73\u53f0\u3002"),(0,s.kt)("p",null,"tcp/ip\uff0c\u901a\u7528\u8fde\u63a5\uff0c"),(0,s.kt)("p",null,"\u5173\u4e8emysql\u547d\u4ee4\u7684\u4f7f\u7528\n-u\uff0c\u7528\u6237\u540d\n-p\uff0c\u5bc6\u7801\n-P\uff0c\u7aef\u53e3\n-s\uff0csocket"),(0,s.kt)("p",null,"\u5728\u8fde\u63a5\u65f6\u4f1a\u8fdb\u884c\u6743\u9650\u6821\u9a8c\uff0c\u90a3\u5982\u4f55\u8fdb\u884c\u6821\u9a8c\u5462\uff1f\nuser+host\u8fdb\u884c\u6821\u9a8c\uff0c\u5177\u4f53\u7684\u4fe1\u606f\u5b58\u50a8\u5728mysql.user\u8868\u4e2d"),(0,s.kt)("p",null,"\u5bf9root\u8d26\u6237\u8bbe\u7f6e\u5bc6\u7801"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"set password"),(0,s.kt)("li",{parentName:"ol"},"alter user root@localhost identified by ' "),(0,s.kt)("li",{parentName:"ol"})),(0,s.kt)("p",null,"\u5728\u522b\u7684\u535a\u5ba2\u770b\u5230\u5728\u4f7f\u7528alter\u547d\u4ee4\u4fee\u6539\u5bc6\u7801\u65f6\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER USER \u2018test\u2019@\u2018localhost\u2019 IDENTIFIED WITH MYSQL_NATIVE_PASSWORD BY \u2018\u65b0\u5bc6\u7801\u2019;\n")),(0,s.kt)("p",null,"WITH MYSQL_NATIVE_PASSWORD\u662f\u4ec0\u4e48\uff1f"),(0,s.kt)("p",null,"mysql8.0\u7684\u9ed8\u8ba4\u5bc6\u7801\u6821\u9a8c\u4e0d\u518d\u662fpassword\uff0c\u6240\u4ee5\u5728\u521b\u5efa\u7528\u6237\u65f6\uff0c\u5982\u679c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u662f\u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u7aef\u7684."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql"},"#  \u5ba2\u6237\u7aef\u662f\u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u7684\u3002\ncreate user 'username'@'%' identified by 'password';\n\n# \u6b63\u786e\u7684\u505a\u6cd5\nalter user user_name@host identified with mysql_native_password by 'password';\n")),(0,s.kt)("p",null,"\u4e00\u52b3\u6c38\u9038\u7684\u505a\u6cd5\u65f6\uff0c\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u5c06\u9ed8\u8ba4\u7684\u6743\u9650\u6821\u9a8c\u6539\u4e3amysql_native_password\uff0c"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ini"},"vi /etc/password\n\ndefault_authentication_plugin=mysql_native_password\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u90fd\u9700\u8981\u91cd\u542f\u751f\u6548\n")),(0,s.kt)("p",null,"select user,host,plugin from mysql.user;"))}p.isMDXComponent=!0}}]);
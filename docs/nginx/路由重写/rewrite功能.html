<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-nginx/è·¯ç”±é‡å†™/rewriteåŠŸèƒ½">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="liwuming&#39;s Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="liwuming&#39;s Wiki Atom Feed">



<link rel="stylesheet" href="/css/init.css"><title data-rh="true">rewriteåŠŸèƒ½ | liwuming&#x27;s Wiki</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://liwuming.ibiancheng.net/docs/nginx/è·¯ç”±é‡å†™/rewriteåŠŸèƒ½"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="rewriteåŠŸèƒ½ | liwuming&#x27;s Wiki"><meta data-rh="true" name="description" content="rewriteå‡ ä¹æ˜¯webæœåŠ¡å™¨äº§å“ä¸­å‡ ä¹å¿…å¤‡çš„åŠŸèƒ½ï¼Œç”¨äºå¯¹urlçš„é‡å†™ï¼Œå½“ç„¶ä½œä¸ºä½¿ç”¨å¹¿æ³›çš„nginxå¿…é¡»æœ‰è¯¥åŠŸèƒ½"><meta data-rh="true" property="og:description" content="rewriteå‡ ä¹æ˜¯webæœåŠ¡å™¨äº§å“ä¸­å‡ ä¹å¿…å¤‡çš„åŠŸèƒ½ï¼Œç”¨äºå¯¹urlçš„é‡å†™ï¼Œå½“ç„¶ä½œä¸ºä½¿ç”¨å¹¿æ³›çš„nginxå¿…é¡»æœ‰è¯¥åŠŸèƒ½"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://liwuming.ibiancheng.net/docs/nginx/è·¯ç”±é‡å†™/rewriteåŠŸèƒ½"><link data-rh="true" rel="alternate" href="https://liwuming.ibiancheng.net/docs/nginx/è·¯ç”±é‡å†™/rewriteåŠŸèƒ½" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://liwuming.ibiancheng.net/docs/nginx/è·¯ç”±é‡å†™/rewriteåŠŸèƒ½" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.66c181dc.css">
<link rel="preload" href="/assets/js/runtime~main.d4e1ab15.js" as="script">
<link rel="preload" href="/assets/js/main.ab776736.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">ğŸ“š liwuming&#x27;s Wiki</b></a><a class="navbar__item navbar__link" href="/docs/linux/intro">linux</a><a class="navbar__item navbar__link" href="/docs/mysql-dba/intro">mysql-dba</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/nginx/intro">nginx</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nginx/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/nginx/nginxå®‰è£…ä¸å‡çº§/å®‰è£…">nginxå®‰è£…ä¸å‡çº§</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/nginx/nginxç«™ç‚¹é…ç½®/nginxçš„é…ç½®æ–‡ä»¶">nginxç«™ç‚¹é…ç½®</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/nginx/é™æ€åŒ–èµ„æºé…ç½®/é™æ€èµ„æºä¼˜åŒ–">é™æ€åŒ–èµ„æºé…ç½®</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/nginx/å‹ç¼©/ç¼“å­˜é…ç½®">å‹ç¼©</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/nginx/è·¯ç”±é‡å†™/URié‡å†™åŠŸèƒ½">è·¯ç”±é‡å†™</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nginx/è·¯ç”±é‡å†™/URié‡å†™åŠŸèƒ½">URié‡å†™åŠŸèƒ½</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/nginx/è·¯ç”±é‡å†™/rewriteåŠŸèƒ½">rewriteåŠŸèƒ½</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/nginx/è´Ÿè½½å‡è¡¡/LVSå››å±‚è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/nginx/ä»£ç†/nginxä»£ç†åŠŸèƒ½">ä»£ç†</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><article id="detail"><div class="theme-doc-markdown markdown"><header><h1>rewriteåŠŸèƒ½</h1></header><p>rewriteå‡ ä¹æ˜¯webæœåŠ¡å™¨äº§å“ä¸­å‡ ä¹å¿…å¤‡çš„åŠŸèƒ½ï¼Œç”¨äºå¯¹urlçš„é‡å†™ï¼Œå½“ç„¶ä½œä¸ºä½¿ç”¨å¹¿æ³›çš„nginxå¿…é¡»æœ‰è¯¥åŠŸèƒ½</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ä¿¡æ¯</div><div class="admonitionContent_S0QG"><p>nginxæœåŠ¡å™¨çš„rewriteä¾èµ–äºPCREçš„æ”¯æŒ,å› æ­¤åœ¨ç¼–è¯‘å®‰è£…nginxå™¨æ—¶ï¼Œéœ€è¦å®‰è£…pcreåº“</p></div></div><p>rewriteçš„åº”ç”¨åœºæ™¯
urlé‡å†™
ç‹¬ç«‹åŸŸå
åŸŸåè·³è½¬
åŸŸåé•œåƒ
ç›®å½•è‡ªåŠ¨æ·»åŠ /
åˆå¹¶ç›®å½•
å®ç°é˜²ç›—é“¾</p><h1>rewriteçš„ç›¸å…³å‘½ä»¤</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setæŒ‡ä»¤">setæŒ‡ä»¤<a class="hash-link" href="#setæŒ‡ä»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç”¨æ¥è®¾ç½®ä¸€ä¸ªå˜é‡</p><p>æ³¨æ„ï¼šå˜é‡åçš„å‘½åï¼Œä¸å¯ä¸å…¨å±€å˜é‡é‡åï¼Œé‚£å…¨å±€å˜é‡æœ‰å“ªäº›ï¼Ÿ</p><p>document_uriï¼Œè®¿é—®urlçš„uri
remote_addr,å®¢æˆ·ç«¯ip
argsï¼Œè®¿é—®urlä¸­çš„å‚æ•°åˆ—è¡¨</p><p>http_user_agent,å®¢æˆ·ç«¯agentä¿¡æ¯
http_cookie,å®¢æˆ·ç«¯agentä¿¡æ¯</p><p>document_root #å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼ã€‚
document_uri #ä¸uriç›¸åŒã€‚
host #è¯·æ±‚ä¸»æœºå¤´å­—æ®µï¼Œå¦åˆ™ä¸ºæœåŠ¡å™¨åç§°ã€‚
hostname #Set to themachineâ€™s hostname as returned by gethostname
http_HEADER</p><p>args #è¿™ä¸ªå˜é‡ç­‰äºè¯·æ±‚è¡Œä¸­(GETè¯·æ±‚)çš„å‚æ•°ï¼Œå¦‚ï¼šfoo=123&amp;bar=blahblah;
is_args #å¦‚æœæœ‰argså‚æ•°ï¼Œè¿™ä¸ªå˜é‡ç­‰äºâ€?â€ï¼Œå¦åˆ™ç­‰äºâ€&quot;ï¼Œç©ºå€¼ã€‚</p><p>http_user_agent #å®¢æˆ·ç«¯agentä¿¡æ¯
http_cookie #å®¢æˆ·ç«¯cookieä¿¡æ¯</p><p>limit_rate #è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡ã€‚
request_body_file #å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“ä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶åã€‚
request_method #å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POSTã€‚
remote_addr #å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚
remote_port #å®¢æˆ·ç«¯çš„ç«¯å£ã€‚
request_method #GETæˆ–POST
request_filename #å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆã€‚
request_uri #åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚ï¼šâ€/foo/bar.php?arg=bazâ€ã€‚ä¸èƒ½ä¿®æ”¹ã€‚</p><p>è®°å¿†æ–¹æ³•</p><p>å®¢æˆ·ç«¯æ¥è¯·æ±‚æœåŠ¡ç«¯ä¿¡æ¯ï¼Œ
å…ˆè®°å¿†å®¢æˆ·ç«¯ä¿¡æ¯
remote_addr,å®¢æˆ·ç«¯ip
remote_port,å®¢æˆ·ç«¯ç«¯å£å·</p><p>argsï¼Œ
is_args,</p><p>http_cookie
http_user_agent</p><p>remote_addr
remote_port
request_method
args
is_args</p><p>if
break
return
rewrite
rewrite_log</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setæŒ‡ä»¤-1">setæŒ‡ä»¤<a class="hash-link" href="#setæŒ‡ä»¤-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><table><thead><tr><th>åŠŸèƒ½æè¿°</th><th>è®¾ç½®è‡ªå®šä¹‰å˜é‡</th></tr></thead><tbody><tr><td>è¯­æ³•è¯´æ˜</td><td>è¯­æ³•è¯´æ˜</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ifæŒ‡ä»¤">ifæŒ‡ä»¤<a class="hash-link" href="#ifæŒ‡ä»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><table><thead><tr><th>åŠŸèƒ½æè¿°</th><th>ç”¨äºæ‰§è¡Œé€»è¾‘æ¡ä»¶åˆ¤æ–­</th></tr></thead><tbody><tr><td>è¯­æ³•è¯´æ˜</td><td>if (condition){   //æ‰§è¡Œ   }</td></tr></tbody></table><p>conditionæ”¯æŒä»¥ä¸‹æ ¼å¼</p><ol><li>å˜é‡å,0å’Œç©ºå­—ç¬¦ä¸²ä¸ºfalse,å…¶ä»–ä¸ºtrue</li><li>=/!=,ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²ä¸å˜é‡æ˜¯å¦ç›¸ç­‰,ç›¸ç­‰ä¸ºtrue,ä¸èƒ½ä¸ºfalse</li><li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å˜é‡è¿›è¡ŒåŒ¹é…--~,~<em>,!~,!~</em></li><li>ç›®å½•æ˜¯å¦å­˜åœ¨ -d</li><li>æ–‡ä»¶æ˜¯å¦å­˜åœ¨ -f</li><li>æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨-e</li><li>æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ-x</li></ol><div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">location /hello1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ($request_method = GET){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 200 &#x27;ok&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 200 &#x27;post&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location /hello2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ($http_user_agent ~ AppleWebKit){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 200 &#x27;Google Chrome&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 200 &#x27;firefox&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location /hello3 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ( !-f $request_filename){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 404 &#x27;file not found&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 200 &#x27;file is exists&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ—¢ç„¶è¯­æ³•åƒjsçš„ifè¯­å¥ï¼Œå¥½å¥‡æ˜¯å¦æ”¯æŒå–åæ“ä½œ,å¦‚if(!$num){}?ç»æµ‹è¯•å‘ç°ä¸æ”¯æŒå–åæ“ä½œ</p></blockquote><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ä¿¡æ¯</div><div class="admonitionContent_S0QG"><p>ifæŒ‡ä»¤å’Œjsä¸­çš„ifè¯­å¥ç±»ä¼¼--éƒ½ä¼šåœ¨conditionä¸ºtrueæ—¶--ä¸ä¸ºç©ºä¸”ä¸ä¸º0ï¼Œæ‰ä¼šæ‰§è¡Œæ‹¬å·å†…çš„ä»£ç ï¼Œä½†ä»¥ä¸‹ä¸¤ç‚¹å€¼å¾—æ³¨æ„ï¼š</p><ol><li>ifä¸()ä¹‹é—´å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªç©ºæ ¼</li><li>åœ¨å˜é‡å’Œå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œå­—ç¬¦ä¸²å¯ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨å¼•å·</li></ol></div></div><h1>breakæŒ‡ä»¤</h1><h1>lastæŒ‡ä»¤</h1><p>breakå’Œlastçš„ç”¨æ³•ç›¸åŒ,ä½†æ˜¯å«ä¹‰ä¸åŒ--éœ€è¦æ”¾åœ¨rewriteå°¾éƒ¨,ç”¨æ¥æ§åˆ¶é‡å†™åçš„é“¾æ¥æ˜¯å¦ç»§ç»­è¢«nginxé…ç½®æ‰§è¡Œ</p><p>åœ¨locationå¤–éƒ¨</p><div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rewrite /1.html /2.html break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rewrite /2.html /3.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location /2.html {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 200 &#x27;hello world&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è®¿é—®/1.htmlæ—¶ï¼Œåœ¨æ²¡æœ‰ä¸‹æ–¹locationå—æ—¶ï¼Œä¼šæŒ‰ç…§è¢«é‡å†™åˆ°2.html;
åœ¨æœ‰ä¸‹æ–¹locationå—æ—¶ï¼Œä¼šç»§ç»­æ‰§è¡Œlocationå—</p><p>åœ¨locationå†…éƒ¨</p><div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 80; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name test.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root /tmp/123.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite /1.html /2.html break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite /2.html /3.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /2.html{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite /2.html /a.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /3.html{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite /3.html /b.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“è®¿é—®/1.htmlæ—¶ï¼Œæœ€ç»ˆè®¿é—®çš„æ˜¯2.html;ä¹Ÿå°±æ˜¯è¯´åœ¨locationå†…éƒ¨é‡åˆ°breakå°±å˜ç„¶è€Œæ­¢äº†ï¼Œå› ä¸ºæ²¡æœ‰æ¯”locationæ›´å°çš„ä½œç”¨åŸŸäº†ã€‚</p><p>å¦‚æœæŠŠbreakæ¢æˆlastä¼šæ€æ ·å‘¢ï¼Ÿé‚£æ ·çš„è¯ä¼šæœ€ç»ˆè®¿é—®a.html;</p><blockquote><p>åœ¨location{}å†…éƒ¨ï¼Œé‡åˆ°lastï¼Œæœ¬location{}å†…åç»­æŒ‡ä»¤ä¸å†æ‰§è¡Œï¼Œè€Œé‡å†™åçš„urlå†æ¬¡ä»å¤´å¼€å§‹ï¼Œä»å¤´åˆ°å°¾åŒ¹é…ä¸€éè§„åˆ™ã€‚</p></blockquote><p><a href="https://www.cnblogs.com/oldxu/p/11568223.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/oldxu/p/11568223.html</a></p><h1>returnæŒ‡ä»¤</h1><p>ç”¨äºå®Œæˆè¯·æ±‚å¤„ç†ï¼Œç›´æ¥åƒå®¢æˆ·ç«¯è¿”å›
rerturn coce <!-- -->[text]<!-- -->|<!-- -->[code]<!-- --> url;</p><p>arg_PARAMETER #è¿™ä¸ªå˜é‡åŒ…å«GETè¯·æ±‚ä¸­ï¼Œå¦‚æœæœ‰å˜é‡PARAMETERæ—¶çš„å€¼ã€‚
args #è¿™ä¸ªå˜é‡ç­‰äºè¯·æ±‚è¡Œä¸­(GETè¯·æ±‚)çš„å‚æ•°ï¼Œå¦‚ï¼šfoo=123&amp;bar=blahblah;
binary_remote_addr #äºŒè¿›åˆ¶çš„å®¢æˆ·åœ°å€ã€‚
body_bytes_sent #å“åº”æ—¶é€å‡ºçš„bodyå­—èŠ‚æ•°æ•°é‡ã€‚å³ä½¿è¿æ¥ä¸­æ–­ï¼Œè¿™ä¸ªæ•°æ®ä¹Ÿæ˜¯ç²¾ç¡®çš„ã€‚
content_length #è¯·æ±‚å¤´ä¸­çš„Content-lengthå­—æ®µã€‚
content_type #è¯·æ±‚å¤´ä¸­çš„Content-Typeå­—æ®µã€‚
cookie_COOKIE #cookie COOKIEå˜é‡çš„å€¼
document_root #å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼ã€‚
document_uri #ä¸uriç›¸åŒã€‚
host #è¯·æ±‚ä¸»æœºå¤´å­—æ®µï¼Œå¦åˆ™ä¸ºæœåŠ¡å™¨åç§°ã€‚
hostname #Set to themachineâ€™s hostname as returned by gethostname
http_HEADER
is_args #å¦‚æœæœ‰argså‚æ•°ï¼Œè¿™ä¸ªå˜é‡ç­‰äºâ€?â€ï¼Œå¦åˆ™ç­‰äºâ€&quot;ï¼Œç©ºå€¼ã€‚
http_user_agent #å®¢æˆ·ç«¯agentä¿¡æ¯
http_cookie #å®¢æˆ·ç«¯cookieä¿¡æ¯
limit_rate #è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡ã€‚
query_string #ä¸argsç›¸åŒã€‚
request_body_file #å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“ä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶åã€‚
request_method #å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POSTã€‚
remote_addr #å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚
remote_port #å®¢æˆ·ç«¯çš„ç«¯å£ã€‚
remote_user #å·²ç»ç»è¿‡Auth Basic ModuleéªŒè¯çš„ç”¨æˆ·åã€‚
request_completion #å¦‚æœè¯·æ±‚ç»“æŸï¼Œè®¾ç½®ä¸ºOK. å½“è¯·æ±‚æœªç»“æŸæˆ–å¦‚æœè¯¥è¯·æ±‚ä¸æ˜¯è¯·æ±‚é“¾ä¸²çš„æœ€åä¸€ä¸ªæ—¶ï¼Œä¸ºç©º(Empty)ã€‚
request_method #GETæˆ–POST
request_filename #å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆã€‚
request_uri #åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚ï¼šâ€/foo/bar.php?arg=bazâ€ã€‚ä¸èƒ½ä¿®æ”¹ã€‚
scheme #HTTPæ–¹æ³•ï¼ˆå¦‚httpï¼Œhttpsï¼‰ã€‚
server_protocol #è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTP/1.0æˆ–HTTP/1.1ã€‚
server_addr #æœåŠ¡å™¨åœ°å€ï¼Œåœ¨å®Œæˆä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨åå¯ä»¥ç¡®å®šè¿™ä¸ªå€¼ã€‚
server_name #æœåŠ¡å™¨åç§°ã€‚
server_port #è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„ç«¯å£å·ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/nginx/05.è·¯ç”±é‡å†™/rewriteåŠŸèƒ½.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article></div></main></div></div></div>
<script src="/assets/js/runtime~main.d4e1ab15.js"></script>
<script src="/assets/js/main.ab776736.js"></script>
</body>
</html>